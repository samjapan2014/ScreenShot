//
//  GPT-1.swift
//  ScreenShot
//
//  Created by Samuel Phillips on 10/14/23.
//

import Foundation
import SwiftUI
import Combine

class AppState: ObservableObject {
    @Published var isScreenshotTaken = false
    @Published var showView = false
    private var cancellable: AnyCancellable?
    
    init() {
        cancellable = $isScreenshotTaken
            .sink { [weak self] value in
                if value {
                    self?.showView = true
                    DispatchQueue.main.asyncAfter(deadline: .now() + 5) {
                        self?.showView = false
                        self?.isScreenshotTaken = false
                    }
                }
            }
    }
}

struct GPTContentView1: View {
    @EnvironmentObject var appState: AppState
    
    var body: some View {
        VStack {
            if appState.showView {
                Text("View Appeared for 5 seconds")
            } else {
                Button("Take Screenshot") {
                    appState.isScreenshotTaken = true
                }
            }
        }
    }
}
